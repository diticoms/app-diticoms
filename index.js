import ft from"react";import{createRoot as gt}from"react-dom/client";import{useState as D,useEffect as Ce,useCallback as pt,useMemo as ut}from"react";import{Settings as mt,LogOut as ht}from"lucide-react";import{useState as de}from"react";import{User as Ee,Lock as Re}from"lucide-react";import{useState as ce}from"react";import{jsx as Ae}from"react/jsx-runtime";var G=({className:t="",size:r=64})=>{let[l,N]=ce("logo.png"),[d,u]=ce(0),m=()=>{d===0?(N("public/logo.png"),u(1)):d===1&&(N("https://service.diticoms.vn/logo.png"),u(2))};return Ae("img",{src:l,alt:"Diticoms Logo",width:r,height:r,className:`${t} object-contain`,onError:m})};import{jsx as C,jsxs as F}from"react/jsx-runtime";var pe=({onLogin:t,isLoading:r})=>{let[l,N]=de(""),[d,u]=de("");return C("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-6 font-sans text-sm",children:F("div",{className:"max-w-md w-full bg-white rounded-[32px] shadow-xl border border-slate-100 p-10 space-y-10 relative overflow-hidden",children:[r&&C("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-md z-[100] flex flex-col items-center justify-center space-y-6",children:F("div",{className:"relative flex flex-col items-center",children:[F("div",{className:"relative",children:[C("div",{className:"absolute inset-0 bg-blue-100 rounded-full animate-ping opacity-20"}),C(G,{size:80,className:"relative z-10 animate-pulse"})]}),F("div",{className:"mt-8 text-center",children:[C("p",{className:"font-black text-blue-600 uppercase tracking-[0.3em] text-[10px] animate-bounce",children:"\u0110ANG T\u1EA2I D\u1EEE LI\u1EC6U"}),F("div",{className:"flex gap-1 justify-center mt-2",children:[C("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.3s]"}),C("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.15s]"}),C("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-bounce"})]})]})]})}),F("div",{className:"flex flex-col items-center text-center space-y-4",children:[C(G,{size:72}),F("div",{children:[C("h1",{className:"text-2xl font-bold text-slate-800 uppercase tracking-tight",children:"DITICOMS SERVICE"}),C("p",{className:"font-bold text-slate-400 uppercase tracking-widest mt-2",children:"H\u1EC7 th\u1ED1ng qu\u1EA3n l\xFD n\u1ED9i b\u1ED9"})]})]}),F("form",{onSubmit:g=>{g.preventDefault(),l&&d&&t(l,d)},className:"space-y-6",children:[F("div",{className:"relative group",children:[C(Ee,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-blue-400 transition-colors",size:22}),C("input",{type:"text",placeholder:"T\xEAn \u0111\u0103ng nh\u1EADp",className:"w-full pl-14 pr-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:bg-white focus:border-blue-300 transition-all font-medium",value:l,onChange:g=>N(g.target.value),required:!0})]}),F("div",{className:"relative group",children:[C(Re,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-blue-400 transition-colors",size:22}),C("input",{type:"password",placeholder:"M\u1EADt kh\u1EA9u",className:"w-full pl-14 pr-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:bg-white focus:border-blue-300 transition-all font-medium",value:d,onChange:g=>u(g.target.value),required:!0})]}),C("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-5 rounded-2xl shadow-lg shadow-blue-200 transition-all flex items-center justify-center uppercase tracking-widest active:scale-[0.98]",children:"\u0110\u0102NG NH\u1EACP H\u1EC6 TH\u1ED0NG"})]}),C("div",{className:"pt-6 text-center border-t border-slate-50",children:C("p",{className:"font-bold text-slate-300 uppercase tracking-widest text-[10px]",children:"v1.0.44 \u2022 diticoms.vn"})})]})})};import{useState as be,useMemo as Pe,useRef as se}from"react";import{Search as fe,ChevronRight as Ue,Calendar as ze,Filter as De,CheckCircle2 as _e,MessageSquare as Oe,Phone as Me,MapPin as Fe,Download as He}from"lucide-react";import*as Q from"xlsx";var ae=()=>new Date().toISOString().split("T")[0];var H=t=>{let r=typeof t=="number"?t:parseInt(String(t).replace(/\D/g,""),10);return isNaN(r)?"0":r.toLocaleString("vi-VN")},ue=t=>{if(typeof t=="number")return t;let r=parseInt(t.replace(/\D/g,""),10);return isNaN(r)?0:r},me=t=>t.reduce((r,l)=>r+(l.total||0),0);function he(t,r){let l;return(...N)=>{clearTimeout(l),l=setTimeout(()=>t(...N),r)}}import{Fragment as ge,jsx as p,jsxs as h}from"react/jsx-runtime";var xe=({data:t,loading:r,technicians:l,selectedId:N,onSelectRow:d,filters:u,setFilters:m,currentUser:g})=>{let f=g?.role==="admin",[x,j]=be(u.searchTerm),[w,O]=be(null),E=se(null),K=se(!1),X=se({x:0,y:0}),ee=Pe(()=>he(s=>m.setSearchTerm(s),300),[m]),J=s=>{j(s.target.value),ee(s.target.value)},U=()=>{if(t.length===0)return alert("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 xu\u1EA5t!");let s=t.map(a=>{let c=Number(a.revenue||0),i=Number(a.cost||0),S=c-i,e=Number(a.debt||0);return{"Ng\xE0y nh\u1EADp":(a.created_at||"").split("T")[0],"Kh\xE1ch h\xE0ng":a.customerName,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i":a.phone,"\u0110\u1ECBa ch\u1EC9":a.address,"K\u1EF9 thu\u1EADt vi\xEAn":a.technician||"Ch\u01B0a ph\xE2n c\xF4ng","N\u1ED9i dung d\u1ECBch v\u1EE5":a.content,"Doanh thu (\u0111)":c,"Gi\xE1 v\u1ED1n (\u0111)":i,"L\u1EE3i nhu\u1EADn (\u0111)":S,"C\xF4ng n\u1EE3 (\u0111)":e,"Tr\u1EA1ng th\xE1i":a.status}});if(f){let a=s.reduce((c,i)=>({revenue:c.revenue+i["Doanh thu (\u0111)"],cost:c.cost+i["Gi\xE1 v\u1ED1n (\u0111)"],profit:c.profit+i["L\u1EE3i nhu\u1EADn (\u0111)"],debt:c.debt+i["C\xF4ng n\u1EE3 (\u0111)"]}),{revenue:0,cost:0,profit:0,debt:0});s.push({"Ng\xE0y nh\u1EADp":"T\u1ED4NG C\u1ED8NG","Kh\xE1ch h\xE0ng":"","S\u1ED1 \u0111i\u1EC7n tho\u1EA1i":"","\u0110\u1ECBa ch\u1EC9":"","K\u1EF9 thu\u1EADt vi\xEAn":"","N\u1ED9i dung d\u1ECBch v\u1EE5":"","Doanh thu (\u0111)":a.revenue,"Gi\xE1 v\u1ED1n (\u0111)":a.cost,"L\u1EE3i nhu\u1EADn (\u0111)":a.profit,"C\xF4ng n\u1EE3 (\u0111)":a.debt,"Tr\u1EA1ng th\xE1i":""})}let v=Q.utils.json_to_sheet(s),z=Q.utils.book_new();Q.utils.book_append_sheet(z,v,"BaoCaoDichVu");let B=`Diticoms_Report_${new Date().toISOString().split("T")[0]}.xlsx`;Q.writeFile(z,B)},M=s=>{let v=`\u{1F4CC} TH\xD4NG TIN KH\xC1CH H\xC0NG
----------------------
\u{1F464} Kh\xE1ch: ${s.customerName}
\u{1F4DE} S\u0110T: ${s.phone}
\u{1F4CD} \u0110\u1ECBa ch\u1EC9: ${s.address||"Kh\xF4ng c\xF3"}
\u{1F4AC} Y\xEAu c\u1EA7u: ${s.content||"S\u1EEDa ch\u1EEFa thi\u1EBFt b\u1ECB"}
----------------------
\u{1F527} K\u1EF9 thu\u1EADt: ${s.technician||"Ch\u01B0a ph\xE2n c\xF4ng"}`;navigator.clipboard.writeText(v).then(()=>{O("\u0110\xE3 ch\xE9p th\xF4ng tin!"),setTimeout(()=>O(null),2e3)}).catch(z=>{console.error("L\u1ED7i copy:",z)})},L=(s,v)=>{K.current=!1,X.current={x:s.clientX,y:s.clientY},E.current=setTimeout(()=>{K.current=!0,M(v)},600)},$=(s,v)=>{E.current&&clearTimeout(E.current),K.current||d(v)};return h("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex flex-col font-sans text-sm relative overflow-hidden lg:h-full",children:[w&&h("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-[100] bg-slate-900/95 backdrop-blur-md text-white px-5 py-2.5 rounded-full flex items-center gap-2 shadow-2xl animate-in fade-in zoom-in duration-200",children:[p(_e,{size:16,className:"text-green-400"}),p("span",{className:"font-black text-[11px] uppercase tracking-widest",children:w})]}),h("div",{className:"space-y-3 mb-5 shrink-0",children:[h("div",{className:"relative group",children:[p(fe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-blue-500 transition-colors",size:18}),p("input",{type:"text",placeholder:"T\xECm t\xEAn, S\u0110T ho\u1EB7c \u0111\u1ECBa ch\u1EC9...",className:"w-full pl-11 pr-4 py-2.5 bg-slate-50 border border-slate-50 rounded-xl outline-none focus:bg-white focus:border-blue-100 transition-all font-medium",value:x,onChange:J})]}),h("div",{className:"flex flex-wrap items-center gap-1.5",children:[h("button",{onClick:()=>m.setViewAll(!u.viewAll),className:`px-3 py-1.5 rounded-xl font-bold transition-all flex items-center gap-1.5 border shadow-sm text-[11px] ${u.viewAll?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,children:[p(De,{size:14})," ",u.viewAll?"T\u1EA5t c\u1EA3":"L\u1ECDc"]}),!u.viewAll&&h("div",{className:"flex items-center gap-1 bg-white rounded-xl px-2 border border-slate-200 h-[34px] shadow-sm",children:[p(ze,{size:12,className:"text-slate-400"}),p("input",{type:"date",className:"bg-transparent font-bold text-slate-600 outline-none w-[88px] text-[10px]",value:u.dateFrom,onChange:s=>m.setDateFrom(s.target.value)}),p("span",{className:"text-slate-300",children:"/"}),p("input",{type:"date",className:"bg-transparent font-bold text-slate-600 outline-none w-[88px] text-[10px]",value:u.dateTo,onChange:s=>m.setDateTo(s.target.value)})]}),f&&h(ge,{children:[p("div",{className:"relative flex-1 min-w-[80px]",children:h("select",{className:"w-full pl-2 pr-6 py-1.5 bg-white border border-slate-200 rounded-xl outline-none font-bold text-slate-600 appearance-none h-[34px] cursor-pointer text-[10px] shadow-sm",value:u.searchTech,onChange:s=>m.setSearchTech(s.target.value),children:[p("option",{value:"",children:"KTV"}),l.map(s=>p("option",{value:s,children:s},s))]})}),h("button",{onClick:U,className:"h-[34px] px-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-sm active:scale-95 text-[10px] uppercase tracking-wider",children:[p(He,{size:14})," EXCEL"]})]})]})]}),p("div",{className:"flex-1 lg:overflow-y-auto space-y-2 pr-1 custom-scrollbar pb-2",children:r?h("div",{className:"py-12 flex flex-col items-center justify-center space-y-6",children:[h("div",{className:"relative",children:[p("div",{className:"absolute inset-0 bg-blue-50 rounded-full animate-ping opacity-50 scale-150"}),p(G,{size:48,className:"relative z-10 animate-pulse"})]}),p("span",{className:"font-black text-slate-400 uppercase tracking-[0.2em] text-[10px]",children:"\u0110ang t\u1EA3i..."})]}):t.length===0?h("div",{className:"py-12 flex flex-col items-center justify-center text-slate-300 space-y-3",children:[p(fe,{size:48,strokeWidth:1,className:"opacity-40"}),p("span",{className:"font-black uppercase tracking-widest text-[11px]",children:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"})]}):t.map(s=>h("div",{onPointerDown:v=>L(v,s),onPointerUp:v=>$(v,s),className:`p-4 rounded-[24px] border transition-all cursor-pointer flex items-center justify-between group relative select-none touch-none ${N===s.id?"bg-blue-50/80 border-blue-100 ring-2 ring-blue-50":"bg-white border-slate-50 hover:border-slate-200 hover:bg-slate-50/50"}`,children:[h("div",{className:"flex gap-3.5 items-center flex-1 min-w-0",children:[h("div",{className:"h-11 w-11 bg-slate-100/50 rounded-2xl flex flex-col items-center justify-center font-bold text-slate-500 group-hover:bg-blue-100 group-hover:text-blue-600 transition-colors text-[13px] shrink-0 shadow-sm",children:[p("span",{children:(s.created_at||"").split("T")[0]?.split("-")[2]||"--"}),h("span",{className:"opacity-60 text-[10px]",children:["T",(s.created_at||"").split("T")[0]?.split("-")[1]||"--"]})]}),h("div",{className:"min-w-0 flex-1",children:[p("div",{className:"font-bold text-slate-800 leading-tight mb-0.5 truncate text-[14px]",children:s.customerName}),h("div",{className:"flex flex-col gap-0.5 mb-1.5",children:[h("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-medium",children:[p(Me,{size:10,className:"text-blue-400"}),p("span",{children:s.phone}),s.address&&h(ge,{children:[p("span",{className:"text-slate-200",children:"|"}),p(Fe,{size:10,className:"text-red-400"}),p("span",{className:"truncate max-w-[120px]",children:s.address})]})]}),h("div",{className:"text-[11px] text-slate-400 line-clamp-1 italic flex items-center gap-1",children:[p(Oe,{size:10,className:"shrink-0"}),p("span",{className:"truncate",children:s.content||"Y\xEAu c\u1EA7u s\u1EEDa ch\u1EEFa"})]})]}),h("div",{className:"flex items-center gap-2",children:[p("span",{className:"font-black text-slate-400 uppercase tracking-tighter text-[10px] truncate max-w-[90px]",children:s.technician||"CH\u01AFA PH\xC2N C\xD4NG"}),p("span",{className:`font-black px-2 py-0.5 rounded-lg uppercase tracking-widest text-[9px] ${s.status==="Ho\xE0n th\xE0nh"?"bg-green-100 text-green-600":s.status==="\u0110ang s\u1EEDa ch\u1EEFa"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:s.status})]})]})]}),h("div",{className:"flex items-center gap-3 shrink-0 ml-3",children:[h("div",{className:"text-right",children:[h("div",{className:"font-black text-slate-800 text-[14px]",children:[H(s.revenue),"\u0111"]}),Number(s.debt)>0&&h("div",{className:"font-black text-red-500 text-[10px] mt-0.5",children:["N\u1EE3: ",H(s.debt)]})]}),p(Ue,{size:18,className:"text-slate-200 group-hover:text-blue-400 transition-all"})]}),N===s.id&&p("div",{className:"absolute left-0 top-4 bottom-4 w-1 bg-blue-500 rounded-r-full"})]},s.id))}),h("div",{className:"mt-2 pt-4 border-t border-slate-50 flex flex-wrap justify-between items-center gap-2 px-1 shrink-0",children:[h("span",{className:"font-black text-slate-400 uppercase tracking-widest text-[10px]",children:[u.viewAll?"T\u1ED5ng c\u1ED9ng: ":"Trong ng\xE0y: ",p("span",{className:"text-slate-700 ml-1 font-black",children:t.length})]}),f&&h("span",{className:"font-black text-blue-600 bg-blue-50 px-4 py-2 rounded-2xl uppercase tracking-[0.1em] border border-blue-100 text-[11px] shadow-sm",children:["Thu: ",H(t.reduce((s,v)=>s+Number(v.revenue||0),0)),"\u0111"]})]})]})};import{useState as ne,useRef as je,useMemo as Ke}from"react";import{Plus as $e,Trash2 as we,Activity as re,User as Ge,Phone as qe,MapPin as Xe,ReceiptText as Ve,X as Je,Share2 as Be,MessageSquare as We}from"lucide-react";import Ye from"html2canvas";var oe="https://script.google.com/macros/s/AKfycbydOG7vnrXSXF6o0tLU843G_P2Jl9iOCcyuGAI7gRqhLrgmCvMgGj84HKPcfLFf1ZJL/exec",ve={sheetUrl:oe,bankInfo:{bankId:"TCB",accountNo:"7929499999",accountName:"NGUYEN PHUOC DUC"}},te=["M\u1EDBi ti\u1EBFp nh\u1EADn","\u0110ang s\u1EEDa ch\u1EEFa","Ho\xE0n th\xE0nh"];import{jsx as k,jsxs as I}from"react/jsx-runtime";var Ne=({formData:t,bankInfo:r})=>{let l=me(t.workItems),N=r?`https://img.vietqr.io/image/${r.bankId}-${r.accountNo}-compact2.png?amount=${l}&addInfo=DITICOMS SERVICE ${t.customerName.toUpperCase()}&accountName=${encodeURIComponent(r.accountName)}`:"";return I("div",{className:"w-[302px] bg-white p-5 mx-auto font-sans shadow-none border-0 block",style:{height:"auto",minHeight:"fit-content"},children:[I("div",{className:"flex flex-col items-center text-center space-y-1 mb-4",children:[k(G,{size:48}),k("h1",{className:"text-lg font-black uppercase text-blue-600 tracking-tight",children:"DITICOMS SERVICE"}),k("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-widest",children:"S\u1EEDa ch\u1EEFa & B\u1EA3o tr\xEC M\xE1y t\xEDnh"}),k("div",{className:"w-10 h-0.5 bg-blue-600 rounded-full mt-1"})]}),I("div",{className:"space-y-1.5 mb-4 text-[11px]",children:[I("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[k("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"Kh\xE1ch:"}),k("span",{className:"font-bold text-slate-900",children:t.customerName})]}),I("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[k("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"S\u0110T:"}),k("span",{className:"font-bold text-slate-900",children:t.phone})]}),I("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[k("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"Ng\xE0y:"}),k("span",{className:"font-bold text-slate-900",children:new Date().toLocaleDateString("vi-VN")})]})]}),I("div",{className:"space-y-2 mb-4",children:[k("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Chi ti\u1EBFt d\u1ECBch v\u1EE5"}),I("table",{className:"w-full text-left text-[11px]",children:[k("thead",{children:I("tr",{className:"text-[9px] text-slate-400 uppercase border-b",children:[k("th",{className:"pb-1 font-bold",children:"M\xF4 t\u1EA3"}),k("th",{className:"pb-1 text-right font-bold",children:"Ti\u1EC1n"})]})}),k("tbody",{className:"divide-y divide-slate-50",children:t.workItems.map((d,u)=>I("tr",{children:[I("td",{className:"py-1.5 text-slate-700 leading-tight pr-1",children:[d.desc," ",Number(d.qty)>1?`x${d.qty}`:""]}),k("td",{className:"py-1.5 text-right font-bold text-slate-900 whitespace-nowrap",children:H(d.total)})]},u))})]})]}),I("div",{className:"bg-slate-50 p-2.5 rounded-xl flex justify-between items-center mb-4",children:[k("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"T\u1ED5ng c\u1ED9ng:"}),I("span",{className:"text-base font-black text-blue-600",children:[H(t.revenue),"\u0111"]})]}),r&&t.status!=="Ho\xE0n th\xE0nh"&&I("div",{className:"flex flex-col items-center space-y-2 pt-2 border-t border-dashed border-slate-200",children:[k("img",{src:N,alt:"QR",className:"w-32 h-32 border-2 border-white shadow-sm"}),I("p",{className:"text-[9px] font-black text-slate-800 uppercase",children:[r.bankId," - ",r.accountNo]})]}),I("div",{className:"text-center pt-5 border-t border-slate-50 mt-4",children:[k("p",{className:"text-[9px] font-bold text-slate-400 uppercase italic",children:"C\u1EA3m \u01A1n qu\xFD kh\xE1ch!"}),k("p",{className:"text-[7px] text-slate-300 mt-1",children:"DITICOMS - SERVICE MANAGER"})]})]})};import{Fragment as Qe,jsx as n,jsxs as y}from"react/jsx-runtime";var ye=({formData:t,setFormData:r,technicians:l,priceList:N,selectedId:d,isSubmitting:u,currentUser:m,onSave:g,onUpdate:f,onDelete:x,onClear:j,services:w,bankInfo:O})=>{let E=m?.role==="admin",[K,X]=ne(null),[ee,J]=ne(!1),[U,M]=ne(!1),L=je(null),$=Ke(()=>{let a={};return w.forEach(c=>{(Array.isArray(c.workItems)?c.workItems:[]).forEach(S=>{S.desc&&(a[S.desc.trim()]=Number(S.price)||0)})}),N.forEach(c=>a[c.name.trim()]=c.price),Object.entries(a).map(([c,i])=>({name:c,price:i}))},[w,N]),s=(a,c)=>{r(i=>({...i,[a]:c}))},v=(a,c,i)=>{r(S=>{let e=[...S.workItems],o={...e[a],[c]:i},b=ue(c==="price"?i:o.price),V=Number(c==="qty"?i:o.qty);o.total=b*V,e[a]=o;let A=e.reduce((Y,ie)=>Y+(Number(ie.total)||0),0);return{...S,workItems:e,revenue:A,debt:S.status==="Ho\xE0n th\xE0nh"?0:A}})},z=async()=>{if(L.current){M(!0),await new Promise(a=>setTimeout(a,200));try{let a=L.current,c=await Ye(a,{scale:3,useCORS:!0,backgroundColor:"#ffffff",logging:!1,width:a.offsetWidth,height:a.scrollHeight,windowWidth:a.offsetWidth,windowHeight:a.scrollHeight,onclone:S=>{let e=S.querySelector("[data-bill-container]");e instanceof HTMLElement&&(e.style.height="auto",e.style.maxHeight="none")}}),i=`Bill_${(t.customerName||"Khach").toUpperCase().replace(/\s+/g,"_")}.png`;c.toBlob(async S=>{if(!S)return;if(navigator.share&&navigator.canShare)try{let o=new File([S],i,{type:"image/png"});if(navigator.canShare({files:[o]})){await navigator.share({files:[o],title:"Diticoms Service Bill",text:`H\xF3a \u0111\u01A1n kh\xE1ch h\xE0ng: ${t.customerName}`}),M(!1);return}}catch(o){console.debug("Share failed",o)}let e=document.createElement("a");e.href=c.toDataURL("image/png"),e.download=i,e.click()},"image/png",1)}catch{alert("L\u1ED7i khi t\u1EA1o \u1EA3nh h\xF3a \u0111\u01A1n.")}finally{M(!1)}}},B="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-xl outline-none focus:bg-white focus:border-blue-400 font-medium transition-all text-slate-800";return y("div",{className:"space-y-6",children:[y("div",{className:"flex justify-between items-center",children:[y("h2",{className:"font-bold text-slate-700 flex items-center gap-2 uppercase tracking-wider text-sm",children:[n(re,{size:18,className:"text-blue-500"})," ",d?"C\u1EADp nh\u1EADt phi\u1EBFu":"Ti\u1EBFp nh\u1EADn m\u1EDBi"]}),d&&E&&n("button",{onClick:x,disabled:u,className:"text-red-400 p-2 hover:bg-red-50 rounded-full transition-colors",children:n(we,{size:20})})]}),y("div",{className:"space-y-3",children:[y("div",{className:"relative",children:[n(qe,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),n("input",{type:"tel",placeholder:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",className:B,value:t.phone,onChange:a=>s("phone",a.target.value)})]}),y("div",{className:"relative",children:[n(Ge,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),n("input",{type:"text",placeholder:"T\xEAn kh\xE1ch h\xE0ng",className:B,value:t.customerName,onChange:a=>s("customerName",a.target.value)})]}),y("div",{className:"relative",children:[n(Xe,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),n("input",{type:"text",placeholder:"\u0110\u1ECBa ch\u1EC9",className:B,value:t.address,onChange:a=>s("address",a.target.value)})]}),y("div",{className:"relative",children:[n(We,{className:"absolute left-3.5 top-3.5 text-slate-400",size:16}),n("textarea",{placeholder:"N\u1ED9i dung y\xEAu c\u1EA7u...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-xl min-h-[80px] focus:bg-white focus:border-blue-400 outline-none",value:t.content,onChange:a=>s("content",a.target.value)})]}),y("div",{className:"grid grid-cols-2 gap-3",children:[n("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-100 rounded-xl font-bold appearance-none text-slate-700 outline-none",value:t.status,onChange:a=>s("status",a.target.value),children:te.map(a=>n("option",{value:a,children:a},a))}),y("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-100 rounded-xl font-bold appearance-none text-slate-700 outline-none",value:t.technician,onChange:a=>s("technician",a.target.value),disabled:!E,children:[n("option",{value:"",children:"K\u1EF9 thu\u1EADt vi\xEAn"}),l.map(a=>n("option",{value:a,children:a},a))]})]}),y("div",{className:"pt-2",children:[y("div",{className:"flex justify-between items-center mb-2",children:[n("span",{className:"font-black text-slate-400 text-[10px] uppercase tracking-widest",children:"D\u1ECBch v\u1EE5 & Linh ki\u1EC7n"}),n("button",{onClick:()=>r(a=>({...a,workItems:[...a.workItems,{desc:"",qty:1,price:"",total:0}]})),className:"text-blue-500 p-1 hover:bg-blue-50 rounded-lg",children:n($e,{size:18})})]}),n("div",{className:"space-y-2",children:t.workItems.map((a,c)=>y("div",{className:"p-3 bg-slate-50/50 border border-slate-100 rounded-2xl space-y-2 relative group hover:border-blue-100 transition-all",children:[n("input",{type:"text",placeholder:"T\xEAn d\u1ECBch v\u1EE5...",className:"w-full bg-transparent font-bold text-slate-800 outline-none border-b border-transparent focus:border-blue-200",value:a.desc,onFocus:()=>X(c),onChange:i=>v(c,"desc",i.target.value),onBlur:()=>setTimeout(()=>X(null),200)}),K===c&&n("div",{className:"absolute top-full left-0 right-0 bg-white border border-slate-100 shadow-2xl z-50 max-h-40 overflow-auto rounded-xl mt-1",children:$.filter(i=>i.name.toLowerCase().includes(a.desc.toLowerCase())).map((i,S)=>y("div",{onMouseDown:()=>{v(c,"desc",i.name),v(c,"price",i.price)},className:"p-2.5 hover:bg-slate-50 text-xs flex justify-between border-b last:border-0 font-medium cursor-pointer",children:[n("span",{children:i.name}),n("span",{className:"font-bold text-blue-500",children:H(i.price)})]},S))}),y("div",{className:"flex gap-2 text-[11px] font-bold",children:[y("div",{className:"flex-1 bg-white border border-slate-100 p-1.5 rounded-lg px-2 flex items-center gap-1",children:["SL: ",n("input",{type:"number",className:"w-full outline-none font-black text-center bg-transparent",value:a.qty,onChange:i=>v(c,"qty",i.target.value)})]}),n("div",{className:"flex-[2] bg-white border border-slate-100 p-1.5 rounded-lg px-2 text-right",children:n("input",{type:"text",className:"w-full outline-none font-black text-right text-blue-600 bg-transparent",value:H(a.price),onChange:i=>v(c,"price",i.target.value)})}),n("button",{onClick:()=>r(i=>({...i,workItems:i.workItems.filter((S,e)=>e!==c)})),className:"text-slate-300 hover:text-red-400 transition-colors p-1",children:n(we,{size:16})})]})]},c))})]})]}),n("div",{className:"grid grid-cols-2 gap-3 pt-4",children:d?y(Qe,{children:[n("button",{disabled:u,onClick:f,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl uppercase text-[12px] active:scale-95 transition-all",children:u?"\u0110ANG L\u01AFU...":"C\u1EACP NH\u1EACT"}),n("button",{onClick:j,className:"bg-slate-100 text-slate-600 font-bold py-4 rounded-xl uppercase text-[12px] active:scale-95 transition-all",children:"TI\u1EBEP M\u1EDAI"})]}):n("button",{disabled:u,onClick:g,className:"col-span-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg uppercase tracking-wider text-[12px] active:scale-95 transition-all",children:u?n(re,{className:"animate-spin mx-auto",size:18}):"L\u01AFU PHI\u1EBEU M\u1EDAI"})}),d&&y("button",{onClick:()=>J(!0),className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3.5 rounded-xl uppercase shadow-md flex items-center justify-center gap-2 text-[12px] transition-all",children:[n(Ve,{size:18})," XEM H\xD3A \u0110\u01A0N"]}),ee&&n("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl z-[999999] flex items-center justify-center p-4",children:y("div",{className:"bg-white rounded-[40px] p-2 max-w-[360px] w-full max-h-[95vh] flex flex-col shadow-2xl relative animate-in fade-in zoom-in duration-300",children:[n("button",{onClick:()=>J(!1),className:"absolute top-4 right-4 p-2.5 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-600 z-[1000001] transition-colors shadow-sm",children:n(Je,{size:20})}),n("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-slate-100/30 flex justify-center rounded-t-[38px]",children:n("div",{ref:L,"data-bill-container":!0,className:"bg-white shadow-xl ring-1 ring-slate-100 h-fit",children:n(Ne,{formData:t,bankInfo:O})})}),y("div",{className:"p-4 bg-white grid grid-cols-2 gap-3 rounded-b-[40px] border-t border-slate-50",children:[y("button",{onClick:z,disabled:U,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl uppercase text-[11px] flex items-center justify-center gap-2 active:scale-95 transition-all shadow-lg shadow-green-100",children:[U?n(re,{size:18,className:"animate-spin"}):n(Be,{size:18})," L\u01AFU / CHIA S\u1EBA"]}),n("button",{onClick:()=>window.print(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl uppercase text-[11px] active:scale-95 transition-all shadow-lg shadow-blue-100",children:"IN H\xD3A \u0110\u01A0N"}),n("button",{onClick:()=>J(!1),className:"col-span-2 bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3.5 rounded-2xl uppercase text-[11px] transition-all",children:"\u0110\xD3NG"})]})]})})]})};import{useState as Ze}from"react";import{X as et,Save as tt,CreditCard as at,RefreshCw as st,Loader2 as ot}from"lucide-react";import{jsx as P,jsxs as q}from"react/jsx-runtime";var Se=({config:t,onSave:r,onClose:l,isAdmin:N,onCheckUpdate:d,isCheckingUpdate:u})=>{let[m,g]=Ze({...t});return P("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:q("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl space-y-6",children:[q("div",{className:"flex justify-between items-center",children:[P("h3",{className:"font-black text-slate-900 uppercase tracking-tight",children:"C\u1EA5u h\xECnh h\u1EC7 th\u1ED1ng"}),P("button",{onClick:l,className:"p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",children:P(et,{size:20})})]}),q("div",{className:"space-y-4",children:[q("div",{className:"space-y-3",children:[q("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1 flex items-center gap-2",children:[P(at,{size:12})," Th\xF4ng tin ng\xE2n h\xE0ng"]}),q("div",{className:"grid grid-cols-2 gap-3",children:[P("input",{placeholder:"ID Ng\xE2n h\xE0ng",className:"p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:m.bankInfo?.bankId,onChange:f=>g(x=>({...x,bankInfo:{...x.bankInfo,bankId:f.target.value}}))}),P("input",{placeholder:"S\u1ED1 t\xE0i kho\u1EA3n",className:"p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:m.bankInfo?.accountNo,onChange:f=>g(x=>({...x,bankInfo:{...x.bankInfo,accountNo:f.target.value}}))}),P("input",{placeholder:"Ch\u1EE7 t\xE0i kho\u1EA3n",className:"col-span-2 p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:m.bankInfo?.accountName,onChange:f=>g(x=>({...x,bankInfo:{...x.bankInfo,accountName:f.target.value.toUpperCase()}}))})]})]}),d&&P("div",{className:"pt-2",children:q("button",{onClick:d,disabled:u,className:"w-full flex items-center justify-center gap-2 py-2.5 px-4 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-2xl text-[10px] font-bold uppercase transition-colors",children:[u?P(ot,{size:14,className:"animate-spin"}):P(st,{size:14}),"Ki\u1EC3m tra c\u1EADp nh\u1EADt t\u1EEB GitHub"]})})]}),q("div",{className:"flex gap-3",children:[q("button",{onClick:()=>r(m),className:"flex-1 bg-blue-600 text-white font-bold py-3 rounded-2xl flex items-center justify-center gap-2 shadow-lg shadow-blue-100",children:[P(tt,{size:18})," L\u01AFU C\u1EA4U H\xCCNH"]}),P("button",{onClick:l,className:"px-6 bg-slate-100 text-slate-600 font-bold rounded-2xl",children:"H\u1EE6Y"})]})]})})};import{useState as le}from"react";import{X as nt,Plus as rt,Trash2 as lt,Save as it,Users as ct,Loader2 as dt}from"lucide-react";async function _(t,r,l={},N=0){if(!t||!t.startsWith("http"))throw new Error("C\u1EA5u h\xECnh URL Server kh\xF4ng h\u1EE3p l\u1EC7.");try{let m=new AbortController,g=setTimeout(()=>m.abort(),25e3),f=await fetch(t,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({...l,action:r}),signal:m.signal});if(clearTimeout(g),!f.ok)throw new Error(`HTTP ${f.status}`);let x=await f.text();if(!x)throw new Error("Server ph\u1EA3n h\u1ED3i r\u1ED7ng.");try{return JSON.parse(x)}catch{let w=x.match(/(\{[\s\S]*\}|\[[\s\S]*\])/);if(w)try{return JSON.parse(w[0])}catch{throw console.error("[API JSON Parse Error Raw]:",x),new Error("D\u1EEF li\u1EC7u t\u1EEB Server b\u1ECB l\u1ED7i c\u1EA5u tr\xFAc JSON.")}throw new Error("Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u JSON h\u1EE3p l\u1EC7 trong ph\u1EA3n h\u1ED3i.")}}catch(m){if(console.error(`[API Error] ${r}:`,m),N<1&&m.name==="AbortError")return await new Promise(g=>setTimeout(g,1e3)),_(t,r,l,N+1);throw m}}import{jsx as R,jsxs as W}from"react/jsx-runtime";var ke=({technicians:t,setTechnicians:r,onClose:l,sheetUrl:N})=>{let[d,u]=le(""),[m,g]=le(!1),[f,x]=le([...t]),j=async()=>{g(!0);try{(await _(N,"save_settings",{technicians:f})).status==="success"&&(r(f),localStorage.setItem("diti_techs",JSON.stringify(f)),alert("\u0110\xE3 l\u01B0u danh s\xE1ch KTV!"),l())}catch{alert("L\u1ED7i khi l\u01B0u!")}finally{g(!1)}};return R("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:W("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full shadow-2xl space-y-6",children:[W("div",{className:"flex justify-between items-center",children:[W("h3",{className:"font-black text-slate-900 uppercase tracking-tight flex items-center gap-2",children:[R(ct,{size:18})," Qu\u1EA3n l\xFD KTV"]}),R("button",{onClick:l,className:"p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",children:R(nt,{size:20})})]}),W("div",{className:"flex gap-2",children:[R("input",{type:"text",placeholder:"T\xEAn KTV m\u1EDBi",className:"flex-1 p-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none text-sm",value:d,onChange:w=>u(w.target.value),onKeyDown:w=>{w.key==="Enter"&&d&&(x([...f,d.trim()]),u(""))}}),R("button",{onClick:()=>{d&&(x([...f,d.trim()]),u(""))},className:"p-2.5 bg-blue-600 text-white rounded-xl",children:R(rt,{size:20})})]}),R("div",{className:"max-h-60 overflow-auto space-y-2 custom-scrollbar pr-1",children:f.map((w,O)=>W("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-100 rounded-xl",children:[R("span",{className:"font-bold text-sm text-slate-700",children:w}),R("button",{onClick:()=>x(f.filter((E,K)=>K!==O)),className:"text-red-400 hover:text-red-600",children:R(lt,{size:16})})]},O))}),W("div",{className:"flex gap-3",children:[W("button",{disabled:m,onClick:j,className:"flex-1 bg-blue-600 text-white font-bold py-3 rounded-2xl flex items-center justify-center gap-2 shadow-lg shadow-blue-100",children:[m?R(dt,{className:"animate-spin"}):R(it,{size:18})," L\u01AFU L\u1EA0I"]}),R("button",{onClick:l,className:"px-6 bg-slate-100 text-slate-600 font-bold rounded-2xl",children:"H\u1EE6Y"})]})]})})};import{jsx as T,jsxs as Z}from"react/jsx-runtime";var bt=()=>{let[t,r]=D(()=>{let e=localStorage.getItem("diti_user");return e?JSON.parse(e):null}),[l,N]=D(()=>{let e=localStorage.getItem("diti_config");return{...e?JSON.parse(e):ve,sheetUrl:oe}}),[d,u]=D([]),[m,g]=D([]),[f,x]=D([]),[j,w]=D(!1),[O,E]=D(!1),[K,X]=D(!1),[ee,J]=D(!1),[U,M]=D(null),[L,$]=D({dateFrom:ae(),dateTo:ae(),searchTerm:"",searchTech:"",viewAll:!1}),[s,v]=D({customerName:"",phone:"",address:"",status:te[0],technician:"",content:"",workItems:[{desc:"",qty:1,price:"",total:0}],revenue:0,cost:0,debt:0});Ce(()=>{let o=setTimeout(()=>{let b=document.getElementById("splash");b&&(b.style.opacity="0",setTimeout(()=>{b&&b.parentNode&&b.remove()},600))},800);return()=>clearTimeout(o)},[]);let z=pt(async()=>{if(t){w(!0);try{let e=await _(l.sheetUrl,"read");if(Array.isArray(e)){let V=e.map(A=>{let Y=[];try{Y=typeof A.work_items=="string"?JSON.parse(A.work_items):A.work_items||[]}catch{Y=[]}return{...A,customerName:A.customer_name||A.customerName||"",workItems:Array.isArray(Y)?Y:[],revenue:Number(A.revenue||0),cost:Number(A.cost||0),debt:Number(A.debt||0),created_at:A.created_at||A.date||new Date().toISOString()}});u(V)}let o=await _(l.sheetUrl,"read_settings");if(o){let V=[];if(o.technicians)try{V=typeof o.technicians=="string"?JSON.parse(o.technicians):o.technicians}catch{V=["KTV M\u1EB7c \u0111\u1ECBnh"]}g(Array.isArray(V)?V:[])}let b=await _(l.sheetUrl,"read_pricelist");Array.isArray(b)&&x(b)}catch(e){console.error("Fetch Data Error:",e)}finally{w(!1)}}},[t,l.sheetUrl]);Ce(()=>{t&&z()},[t,z]);let B=ut(()=>{let e=[...d];if(t?.role!=="admin"&&t?.associatedTech&&(e=e.filter(o=>o.technician===t.associatedTech)),L.viewAll||(e=e.filter(o=>{let b=(o.created_at||"").split("T")[0];return b>=L.dateFrom&&b<=L.dateTo})),L.searchTech&&(e=e.filter(o=>o.technician===L.searchTech)),L.searchTerm){let o=L.searchTerm.toLowerCase();e=e.filter(b=>(b.customerName||"").toLowerCase().includes(o)||(b.phone||"").includes(o)||(b.address||"").toLowerCase().includes(o))}return e.sort((o,b)=>new Date(b.created_at).getTime()-new Date(o.created_at).getTime())},[d,L,t]),a=async(e,o)=>{w(!0);try{let b=await _(l.sheetUrl,"login",{username:e,password:o});b&&b.status==="success"&&b.user?(r(b.user),localStorage.setItem("diti_user",JSON.stringify(b.user))):alert(b?.error||"Sai th\xF4ng tin \u0111\u0103ng nh\u1EADp")}catch{alert("Kh\xF4ng th\u1EC3 k\u1EBFt n\u1ED1i m\xE1y ch\u1EE7")}finally{w(!1)}},c=()=>{confirm("\u0110\u0103ng xu\u1EA5t kh\u1ECFi h\u1EC7 th\u1ED1ng?")&&(r(null),localStorage.removeItem("diti_user"))},i=e=>{M(e.id),v({customerName:e.customerName,phone:e.phone,address:e.address,status:e.status,technician:e.technician,content:e.content,workItems:Array.isArray(e.workItems)?e.workItems:[],revenue:e.revenue,cost:e.cost,debt:e.debt}),window.innerWidth<1024&&window.scrollTo({top:0,behavior:"smooth"})},S=e=>({...e,customer_name:e.customerName,work_items:e.workItems,search_key:`${e.customerName} ${e.phone} ${e.address}`.toLowerCase()});return t?Z("div",{className:"flex flex-col min-h-screen bg-slate-50 font-sans",children:[T("header",{className:"sticky top-0 z-40 bg-white border-b px-4 py-3 shadow-sm",children:Z("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[Z("div",{className:"flex items-center gap-3",children:[T(G,{size:32}),Z("div",{children:[T("h1",{className:"font-bold text-slate-800 text-[12px] uppercase",children:"DITICOMS SERVICE"}),T("span",{className:"text-slate-400 text-[10px] uppercase font-bold",children:t.name})]})]}),Z("div",{className:"flex gap-2",children:[T("button",{onClick:()=>X(!0),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:T(mt,{size:18})}),T("button",{onClick:c,className:"p-2 text-red-400 hover:bg-red-50 rounded-full transition-colors",children:T(ht,{size:18})})]})]})}),T("main",{className:"flex-1 lg:h-[calc(100vh-64px)] overflow-y-auto lg:overflow-hidden",children:Z("div",{className:"max-w-7xl mx-auto p-4 lg:p-6 h-full grid grid-cols-1 lg:grid-cols-12 gap-6",children:[T("div",{className:"lg:col-span-5 h-full bg-white rounded-2xl shadow-sm border overflow-hidden flex flex-col",children:T("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:T(ye,{formData:s,setFormData:v,technicians:m,priceList:f,selectedId:U,isSubmitting:O,currentUser:t,services:d,bankInfo:l.bankInfo,onClear:()=>{M(null),v({customerName:"",phone:"",address:"",status:te[0],technician:t.associatedTech||"",content:"",workItems:[{desc:"",qty:1,price:"",total:0}],revenue:0,cost:0,debt:0})},onSave:async()=>{E(!0);try{let e=S(s),o=await _(l.sheetUrl,"create",{...e,id:Date.now().toString(),created_at:new Date().toISOString()});o&&o.status==="success"&&(z(),alert("\u0110\xE3 l\u01B0u phi\u1EBFu th\xE0nh c\xF4ng"),M(null))}catch(e){alert("L\u1ED7i khi l\u01B0u: "+(e instanceof Error?e.message:"Kh\xF4ng r\xF5 l\u1ED7i"))}finally{E(!1)}},onUpdate:async()=>{if(U){E(!0);try{let e=S(s),o=await _(l.sheetUrl,"update",{...e,id:U,created_at:d.find(b=>b.id===U)?.created_at});o&&(o.status==="updated"||o.status==="success")&&(z(),alert("\u0110\xE3 c\u1EADp nh\u1EADt th\xE0nh c\xF4ng"))}catch{alert("L\u1ED7i khi c\u1EADp nh\u1EADt")}finally{E(!1)}}},onDelete:async()=>{if(!(!U||!confirm("B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a phi\u1EBFu n\xE0y?"))){E(!0);try{let e=await _(l.sheetUrl,"delete",{id:U,role:t.role});e&&(e.status==="deleted"||e.status==="success")?(z(),M(null),alert("\u0110\xE3 x\xF3a phi\u1EBFu")):alert(e?.error||"Kh\xF4ng th\u1EC3 x\xF3a")}finally{E(!1)}}}})})}),T("div",{className:"lg:col-span-7 h-full flex flex-col min-h-[500px]",children:T(xe,{data:B,loading:j,technicians:m,selectedId:U,onSelectRow:i,filters:L,setFilters:{setDateFrom:e=>$(o=>({...o,dateFrom:e,viewAll:!1})),setDateTo:e=>$(o=>({...o,dateTo:e,viewAll:!1})),setSearchTerm:e=>$(o=>({...o,searchTerm:e})),setSearchTech:e=>$(o=>({...o,searchTech:e})),setViewAll:e=>$(o=>({...o,viewAll:e}))},currentUser:t})})]})}),K&&T(Se,{config:l,isAdmin:t.role==="admin",onClose:()=>X(!1),onSave:e=>{N(e),localStorage.setItem("diti_config",JSON.stringify(e)),X(!1)}}),ee&&T(ke,{technicians:m,setTechnicians:g,onClose:()=>J(!1),sheetUrl:l.sheetUrl})]}):T(pe,{onLogin:a,isLoading:j})},Te=bt;import{jsx as Le}from"react/jsx-runtime";var Ie=document.getElementById("root");Ie&&gt(Ie).render(Le(ft.StrictMode,{children:Le(Te,{})}));
