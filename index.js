import ht from"react";import{createRoot as gt}from"react-dom/client";import{useState as D,useEffect as ke,useCallback as dt,useMemo as pt}from"react";import{Settings as ut,LogOut as mt}from"lucide-react";import{useState as de}from"react";import{User as Ae,Lock as Ee}from"lucide-react";import{jsx as Le}from"react/jsx-runtime";var V=({className:t="",size:o=64})=>Le("img",{src:"logo.png",alt:"Logo",width:o,height:o,className:`${t} object-contain`,loading:"eager",onError:i=>{let N=i.target;N.src.indexOf("public/")===-1&&(N.src="public/logo.png")}});import{jsx as A,jsxs as Y}from"react/jsx-runtime";var pe=({onLogin:t,isLoading:o})=>{let[i,N]=de(""),[p,m]=de(""),b=h=>{h.preventDefault(),i&&p&&t(i,p)},k=i.length>0||p.length>0;return A("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-6 font-sans text-sm",children:Y("div",{className:"max-w-md w-full bg-white rounded-[32px] shadow-lg border border-slate-100 p-8 space-y-8 relative overflow-hidden",children:[o&&A("div",{className:"absolute inset-0 bg-white/98 z-[100] flex flex-col items-center justify-center space-y-6",children:Y("div",{className:"relative flex flex-col items-center",children:[A(V,{size:80,className:"animate-pulse"}),A("div",{className:"mt-8 text-center",children:A("p",{className:"font-black text-blue-600 uppercase tracking-[0.3em] text-[10px]",children:"\u0110ANG T\u1EA2I..."})})]})}),Y("div",{className:"flex flex-col items-center text-center space-y-3",children:[A(V,{size:64,className:o?"animate-pulse":""}),Y("div",{children:[A("h1",{className:"text-xl font-bold text-slate-800 uppercase tracking-tight",children:"DITICOMS SERVICE"}),A("p",{className:"font-bold text-slate-400 uppercase tracking-widest text-[10px] mt-1",children:"H\u1EC7 th\u1ED1ng qu\u1EA3n l\xFD n\u1ED9i b\u1ED9"})]})]}),Y("form",{onSubmit:b,className:"space-y-4",children:[Y("div",{className:"relative",children:[A(Ae,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:20}),A("input",{type:"text",placeholder:"T\xEAn \u0111\u0103ng nh\u1EADp",className:"w-full pl-12 pr-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:bg-white focus:border-blue-400 font-medium",value:i,onChange:h=>N(h.target.value),required:!0,autoComplete:"username",spellCheck:"false"})]}),Y("div",{className:"relative",children:[A(Ee,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300",size:20}),A("input",{type:"password",placeholder:"M\u1EADt kh\u1EA9u",className:"w-full pl-12 pr-5 py-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:bg-white focus:border-blue-400 font-medium",value:p,onChange:h=>m(h.target.value),required:!0,autoComplete:"current-password"})]}),A("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white font-bold py-5 rounded-2xl shadow-md active:bg-blue-700 transition-colors uppercase tracking-widest mt-2",children:"\u0110\u0102NG NH\u1EACP"})]}),A("div",{className:"pt-4 text-center border-t border-slate-50",children:A("p",{className:"font-bold text-slate-300 uppercase tracking-widest text-[9px]",children:"v1.0.44 \u2022 diticoms.vn"})})]})})};import{useState as be,useMemo as Pe,useRef as se}from"react";import{Search as he,ChevronRight as Re,Calendar as Ue,Filter as ze,CheckCircle2 as _e,Phone as De,MapPin as Me,Download as Oe}from"lucide-react";import*as Z from"xlsx";var ne=()=>new Date().toISOString().split("T")[0];var P=t=>{let o=typeof t=="number"?t:parseInt(String(t).replace(/\D/g,""),10);return isNaN(o)?"0":o.toLocaleString("vi-VN")},te=t=>{if(typeof t=="number")return t;let o=parseInt(t.replace(/\D/g,""),10);return isNaN(o)?0:o},ue=t=>t.reduce((o,i)=>o+(i.total||0),0);function me(t,o){let i;return(...N)=>{clearTimeout(i),i=setTimeout(()=>t(...N),o)}}import{Fragment as Fe,jsx as u,jsxs as g}from"react/jsx-runtime";var ge=({data:t,loading:o,technicians:i,selectedId:N,onSelectRow:p,filters:m,setFilters:b,currentUser:k})=>{let h=k?.role==="admin",[v,j]=be(m.searchTerm),[w,F]=be(null),S=se(null),K=se(!1),H=se({x:0,y:0}),G=se(!1),B=Pe(()=>me(a=>b.setSearchTerm(a),300),[b]),z=a=>{j(a.target.value),B(a.target.value)},$=()=>{if(t.length===0)return alert("Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u \u0111\u1EC3 xu\u1EA5t!");let a=t.map(l=>{let d=Number(l.revenue||0),e=Number(l.cost||0),s=d-e,c=Number(l.debt||0);return{"Ng\xE0y nh\u1EADp":(l.created_at||"").split("T")[0],"Kh\xE1ch h\xE0ng":l.customerName,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i":l.phone,"\u0110\u1ECBa ch\u1EC9":l.address,"K\u1EF9 thu\u1EADt vi\xEAn":l.technician||"Ch\u01B0a ph\xE2n c\xF4ng","N\u1ED9i dung d\u1ECBch v\u1EE5":l.content,"Doanh thu (\u0111)":d,"Gi\xE1 v\u1ED1n (\u0111)":e,"L\u1EE3i nhu\u1EADn (\u0111)":s,"C\xF4ng n\u1EE3 (\u0111)":c,"Tr\u1EA1ng th\xE1i":l.status}}),y=Z.utils.json_to_sheet(a),_=Z.utils.book_new();Z.utils.book_append_sheet(_,y,"BaoCaoDichVu");let n=`Diticoms_Report_${new Date().toISOString().split("T")[0]}.xlsx`;Z.writeFile(_,n)},I=a=>{let y=`\u{1F4CC} TH\xD4NG TIN KH\xC1CH H\xC0NG
----------------------
\u{1F464} Kh\xE1ch: ${a.customerName}
\u{1F4DE} S\u0110T: ${a.phone}
\u{1F4CD} \u0110\u1ECBa ch\u1EC9: ${a.address||"Kh\xF4ng c\xF3"}
\u{1F4AC} Y\xEAu c\u1EA7u: ${a.content||"S\u1EEDa ch\u1EEFa thi\u1EBFt b\u1ECB"}
----------------------
\u{1F527} K\u1EF9 thu\u1EADt: ${a.technician||"Ch\u01B0a ph\xE2n c\xF4ng"}`;navigator.clipboard.writeText(y).then(()=>{F("\u0110\xE3 ch\xE9p th\xF4ng tin!"),setTimeout(()=>F(null),2e3)}).catch(_=>{console.error("L\u1ED7i copy:",_)})},X=(a,y)=>{K.current=!1,G.current=!1,H.current={x:a.clientX,y:a.clientY},S.current=setTimeout(()=>{G.current||(K.current=!0,I(y))},600)},L=a=>{let y=Math.abs(a.clientX-H.current.x),_=Math.abs(a.clientY-H.current.y);(y>10||_>10)&&(G.current=!0,S.current&&(clearTimeout(S.current),S.current=null))},M=(a,y)=>{S.current&&(clearTimeout(S.current),S.current=null),!K.current&&!G.current&&p(y)};return g("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex flex-col font-sans text-sm relative overflow-hidden lg:h-full",children:[w&&g("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-[100] bg-slate-900/95 backdrop-blur-md text-white px-5 py-2.5 rounded-full flex items-center gap-2 shadow-2xl animate-in fade-in zoom-in duration-200",children:[u(_e,{size:16,className:"text-green-400"}),u("span",{className:"font-black text-[11px] uppercase tracking-widest",children:w})]}),g("div",{className:"space-y-3 mb-5 shrink-0",children:[g("div",{className:"relative group",children:[u(he,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-blue-500 transition-colors",size:18}),u("input",{type:"text",placeholder:"T\xECm t\xEAn, S\u0110T ho\u1EB7c \u0111\u1ECBa ch\u1EC9...",className:"w-full pl-11 pr-4 py-2.5 bg-slate-50 border border-slate-50 rounded-xl outline-none focus:bg-white focus:border-blue-100 transition-all font-medium",value:v,onChange:z})]}),g("div",{className:"flex flex-wrap items-center gap-1.5",children:[g("button",{onClick:()=>b.setViewAll(!m.viewAll),className:`px-3 py-1.5 rounded-xl font-bold transition-all flex items-center gap-1.5 border shadow-sm text-[11px] ${m.viewAll?"bg-blue-600 text-white border-blue-600":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"}`,children:[u(ze,{size:14})," ",m.viewAll?"T\u1EA5t c\u1EA3":"L\u1ECDc Ng\xE0y"]}),!m.viewAll&&g("div",{className:"flex items-center gap-1 bg-white rounded-xl px-2 border border-slate-200 h-[34px] shadow-sm",children:[u(Ue,{size:12,className:"text-slate-400"}),u("input",{type:"date",className:"bg-transparent font-bold text-slate-600 outline-none w-[88px] text-[10px]",value:m.dateFrom,onChange:a=>b.setDateFrom(a.target.value)}),u("span",{className:"text-slate-300",children:"/"}),u("input",{type:"date",className:"bg-transparent font-bold text-slate-600 outline-none w-[88px] text-[10px]",value:m.dateTo,onChange:a=>b.setDateTo(a.target.value)})]}),g("div",{className:"flex-1 flex gap-1.5",children:[h&&u("div",{className:"relative flex-1 min-w-[80px]",children:g("select",{className:"w-full pl-2 pr-6 py-1.5 bg-white border border-slate-200 rounded-xl outline-none font-bold text-slate-600 appearance-none h-[34px] cursor-pointer text-[10px] shadow-sm",value:m.searchTech,onChange:a=>b.setSearchTech(a.target.value),children:[u("option",{value:"",children:"KTV"}),i.map(a=>u("option",{value:a,children:a},a))]})}),g("button",{onClick:$,className:"h-[34px] px-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-sm active:scale-95 text-[10px] uppercase tracking-wider flex-shrink-0",children:[u(Oe,{size:14})," EXCEL"]})]})]})]}),u("div",{className:"flex-1 lg:overflow-y-auto space-y-2 pr-1 custom-scrollbar pb-2",children:o?g("div",{className:"py-12 flex flex-col items-center justify-center space-y-6",children:[u(V,{size:48,className:"animate-pulse"}),u("span",{className:"font-black text-slate-400 uppercase tracking-[0.2em] text-[10px]",children:"\u0110ang t\u1EA3i..."})]}):t.length===0?g("div",{className:"py-12 flex flex-col items-center justify-center text-slate-300 space-y-3",children:[u(he,{size:48,strokeWidth:1,className:"opacity-40"}),u("span",{className:"font-black uppercase tracking-widest text-[11px]",children:"Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u"})]}):t.map(a=>g("div",{onPointerDown:y=>X(y,a),onPointerMove:L,onPointerUp:y=>M(y,a),className:`p-4 rounded-[24px] border transition-all cursor-pointer flex items-center justify-between group relative select-none touch-pan-y ${N===a.id?"bg-blue-50/80 border-blue-100 ring-2 ring-blue-50":"bg-white border-slate-50 hover:border-slate-200 hover:bg-slate-50/50"}`,children:[g("div",{className:"flex gap-3.5 items-center flex-1 min-w-0",children:[g("div",{className:"h-11 w-11 bg-slate-100/50 rounded-2xl flex flex-col items-center justify-center font-bold text-slate-500 group-hover:bg-blue-100 group-hover:text-blue-600 transition-colors text-[13px] shrink-0 shadow-sm",children:[u("span",{children:(a.created_at||"").split("T")[0]?.split("-")[2]||"--"}),g("span",{className:"opacity-60 text-[10px]",children:["T",(a.created_at||"").split("T")[0]?.split("-")[1]||"--"]})]}),g("div",{className:"min-w-0 flex-1",children:[u("div",{className:"font-bold text-slate-800 leading-tight mb-0.5 truncate text-[14px]",children:a.customerName}),u("div",{className:"flex flex-col gap-0.5 mb-1.5",children:g("div",{className:"flex items-center gap-1.5 text-[10px] text-slate-500 font-medium",children:[u(De,{size:10,className:"text-blue-400"}),u("span",{children:a.phone}),a.address&&g(Fe,{children:[u("span",{className:"text-slate-200",children:"|"}),u(Me,{size:10,className:"text-red-400"}),u("span",{className:"truncate max-w-[120px]",children:a.address})]})]})}),g("div",{className:"flex items-center gap-2",children:[u("span",{className:"font-black text-slate-400 uppercase tracking-tighter text-[10px] truncate max-w-[90px]",children:a.technician||"CH\u01AFA PH\xC2N C\xD4NG"}),u("span",{className:`font-black px-2 py-0.5 rounded-lg uppercase tracking-widest text-[9px] ${a.status==="Ho\xE0n th\xE0nh"?"bg-green-100 text-green-600":a.status==="\u0110ang s\u1EEDa ch\u1EEFa"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}`,children:a.status})]})]})]}),g("div",{className:"flex items-center gap-3 shrink-0 ml-3",children:[g("div",{className:"text-right",children:[g("div",{className:"font-black text-slate-800 text-[14px]",children:[P(a.revenue),"\u0111"]}),Number(a.debt)>0&&g("div",{className:"font-black text-red-500 text-[10px] mt-0.5",children:["N\u1EE3: ",P(a.debt)]})]}),u(Re,{size:18,className:"text-slate-200 group-hover:text-blue-400 transition-all"})]}),N===a.id&&u("div",{className:"absolute left-0 top-4 bottom-4 w-1 bg-blue-500 rounded-r-full"})]},a.id))}),g("div",{className:"mt-2 pt-4 border-t border-slate-50 flex flex-wrap justify-between items-center gap-2 px-1 shrink-0",children:[g("span",{className:"font-black text-slate-400 uppercase tracking-widest text-[10px]",children:[m.viewAll?"T\u1ED5ng c\u1ED9ng: ":"Trong ng\xE0y: ",u("span",{className:"text-slate-700 ml-1 font-black",children:t.length})]}),g("span",{className:"font-black text-blue-600 bg-blue-50 px-4 py-2 rounded-2xl uppercase tracking-[0.1em] border border-blue-100 text-[11px] shadow-sm",children:["Thu: ",P(t.reduce((a,y)=>a+Number(y.revenue||0),0)),"\u0111"]})]})]})};import{useState as oe,useRef as He,useMemo as $e}from"react";import{Plus as je,Trash2 as ve,Activity as le,User as Ke,Phone as Xe,MapPin as Ve,ReceiptText as qe,X as Ge,Share2 as Je,MessageSquare as Be}from"lucide-react";import We from"html2canvas";var re="https://script.google.com/macros/s/AKfycbydOG7vnrXSXF6o0tLU843G_P2Jl9iOCcyuGAI7gRqhLrgmCvMgGj84HKPcfLFf1ZJL/exec",fe={sheetUrl:re,bankInfo:{bankId:"TCB",accountNo:"7929499999",accountName:"NGUYEN PHUOC DUC"}},ae=["M\u1EDBi ti\u1EBFp nh\u1EADn","\u0110ang s\u1EEDa ch\u1EEFa","Ho\xE0n th\xE0nh"];import{jsx as f,jsxs as T}from"react/jsx-runtime";var xe=({formData:t,bankInfo:o})=>{let i=ue(t.workItems),N=o?`https://img.vietqr.io/image/${o.bankId}-${o.accountNo}-compact2.png?amount=${i}&addInfo=DITICOMS SERVICE ${t.customerName.toUpperCase()}&accountName=${encodeURIComponent(o.accountName)}`:"";return T("div",{className:"w-[302px] bg-white p-6 mx-auto font-sans shadow-none border-0 block",style:{height:"auto",minHeight:"fit-content"},children:[T("div",{className:"flex flex-col items-center text-center space-y-1 mb-5",children:[f(V,{size:52}),f("h1",{className:"text-xl font-black uppercase text-blue-600 tracking-tight",children:"DITICOMS SERVICE"}),f("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"S\u1EEDa ch\u1EEFa & B\u1EA3o tr\xEC Thi\u1EBFt b\u1ECB"}),f("div",{className:"w-12 h-0.5 bg-blue-600 rounded-full mt-1.5"})]}),T("div",{className:"space-y-1.5 mb-5 text-[11px]",children:[T("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[f("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"Kh\xE1ch h\xE0ng:"}),f("span",{className:"font-bold text-slate-900",children:t.customerName})]}),T("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[f("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"\u0110i\u1EC7n tho\u1EA1i:"}),f("span",{className:"font-bold text-slate-900",children:t.phone})]}),T("div",{className:"flex justify-between border-b border-slate-50 pb-1",children:[f("span",{className:"font-bold text-slate-400 uppercase text-[9px]",children:"Ng\xE0y t\u1EA1o:"}),f("span",{className:"font-bold text-slate-900",children:new Date().toLocaleDateString("vi-VN")})]})]}),T("div",{className:"space-y-3 mb-6",children:[f("div",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest border-l-2 border-blue-500 pl-2",children:"Chi ti\u1EBFt d\u1ECBch v\u1EE5"}),T("table",{className:"w-full text-left text-[10px] border-collapse",children:[f("thead",{children:T("tr",{className:"text-[8px] text-slate-400 uppercase border-b border-slate-100",children:[f("th",{className:"pb-2 font-black",children:"N\u1ED9i dung"}),f("th",{className:"pb-2 text-center font-black px-1",children:"SL"}),f("th",{className:"pb-2 text-right font-black px-1",children:"\u0110\u01A1n gi\xE1"}),f("th",{className:"pb-2 text-right font-black",children:"T.Ti\u1EC1n"})]})}),f("tbody",{className:"divide-y divide-slate-50",children:t.workItems.map((p,m)=>T("tr",{className:"align-middle",children:[f("td",{className:"py-2.5 text-slate-800 font-bold leading-tight pr-1",children:p.desc}),f("td",{className:"py-2.5 text-center text-slate-600 font-black px-1",children:p.qty}),f("td",{className:"py-2.5 text-right text-slate-600 font-medium whitespace-nowrap px-1",children:P(p.price)}),f("td",{className:"py-2.5 text-right font-black text-slate-900 whitespace-nowrap",children:P(p.total)})]},m))})]})]}),T("div",{className:"bg-slate-50 p-4 rounded-2xl flex justify-between items-center mb-6",children:[f("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-wider",children:"T\u1ED5ng c\u1ED9ng:"}),T("span",{className:"text-lg font-black text-blue-600",children:[P(t.revenue),"\u0111"]})]}),o&&t.status!=="Ho\xE0n th\xE0nh"&&T("div",{className:"flex flex-col items-center space-y-2.5 pt-4 border-t border-dashed border-slate-200",children:[f("img",{src:N,alt:"QR Thanh to\xE1n",className:"w-32 h-32 border-2 border-white shadow-sm rounded-lg"}),T("div",{className:"text-center",children:[T("p",{className:"text-[9px] font-black text-slate-800 uppercase tracking-tighter",children:[o.bankId," \u2022 ",o.accountNo]}),f("p",{className:"text-[8px] font-bold text-slate-400 uppercase mt-0.5",children:o.accountName})]})]}),T("div",{className:"text-center pt-6 border-t border-slate-50 mt-6",children:[f("p",{className:"text-[9px] font-bold text-slate-400 uppercase italic tracking-widest",children:"Tr\xE2n tr\u1ECDng c\u1EA3m \u01A1n!"}),f("p",{className:"text-[7px] text-slate-300 mt-2 font-bold tracking-[0.3em]",children:"DITICOMS SERVICE MANAGER"})]})]})};import{Fragment as Ye,jsx as r,jsxs as x}from"react/jsx-runtime";var Ne=({formData:t,setFormData:o,technicians:i,priceList:N,selectedId:p,isSubmitting:m,currentUser:b,onSave:k,onUpdate:h,onDelete:v,onClear:j,services:w,bankInfo:F})=>{let S=b?.role==="admin",[K,H]=oe(null),[G,B]=oe(!1),[z,$]=oe(!1),I=He(null),X=$e(()=>{let n={};return w.forEach(l=>{(Array.isArray(l.workItems)?l.workItems:[]).forEach(e=>{e.desc&&(n[e.desc.trim()]=Number(e.price)||0)})}),N.forEach(l=>n[l.name.trim()]=l.price),Object.entries(n).map(([l,d])=>({name:l,price:d}))},[w,N]),L=(n,l)=>{o(d=>{let e={...d,[n]:l};return n==="status"&&(l==="Ho\xE0n th\xE0nh"?e.debt=0:e.debt=e.revenue),e})},M=(n,l,d)=>{o(e=>{let s=[...e.workItems],c={...s[n],[l]:d},J=te(l==="price"?d:c.price),E=Number(l==="qty"?d:c.qty);c.total=J*E,s[n]=c;let W=s.reduce((ce,Ie)=>ce+(Number(Ie.total)||0),0);return{...e,workItems:s,revenue:W,debt:e.status==="Ho\xE0n th\xE0nh"?e.debt:W}})},a=async()=>{if(I.current){$(!0),await new Promise(n=>setTimeout(n,200));try{let n=I.current,l=await We(n,{scale:3,useCORS:!0,backgroundColor:"#ffffff",logging:!1,width:n.offsetWidth,height:n.scrollHeight,onclone:e=>{let s=e.querySelector("[data-bill-container]");s instanceof HTMLElement&&(s.style.height="auto",s.style.maxHeight="none")}}),d=`Bill_${(t.customerName||"Khach").toUpperCase().replace(/\s+/g,"_")}.png`;l.toBlob(async e=>{if(!e)return;if(navigator.share&&navigator.canShare)try{let c=new File([e],d,{type:"image/png"});if(navigator.canShare({files:[c]})){await navigator.share({files:[c],title:"Bill",text:`H\xF3a \u0111\u01A1n: ${t.customerName}`}),$(!1);return}}catch{}let s=document.createElement("a");s.href=l.toDataURL("image/png"),s.download=d,s.click()},"image/png",1)}catch{alert("L\u1ED7i khi t\u1EA1o \u1EA3nh.")}finally{$(!1)}}},y="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-xl outline-none focus:bg-white focus:border-blue-400 font-medium transition-all text-slate-800",_="w-full pl-1 pr-1 py-2 bg-white border border-slate-100 rounded-xl outline-none focus:border-blue-400 font-black text-slate-800 text-[10px] text-center";return x("div",{className:"space-y-6",children:[x("div",{className:"flex justify-between items-center",children:[x("h2",{className:"font-bold text-slate-700 flex items-center gap-2 uppercase tracking-wider text-sm",children:[r(le,{size:18,className:"text-blue-500"})," ",p?"C\u1EADp nh\u1EADt phi\u1EBFu":"Ti\u1EBFp nh\u1EADn m\u1EDBi"]}),p&&S&&r("button",{onClick:v,disabled:m,className:"text-red-400 p-2 hover:bg-red-50 rounded-full transition-colors",children:r(ve,{size:20})})]}),x("div",{className:"space-y-3",children:[x("div",{className:"relative",children:[r(Xe,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),r("input",{type:"tel",placeholder:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",className:y,value:t.phone,onChange:n=>L("phone",n.target.value)})]}),x("div",{className:"relative",children:[r(Ke,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),r("input",{type:"text",placeholder:"T\xEAn kh\xE1ch h\xE0ng",className:y,value:t.customerName,onChange:n=>L("customerName",n.target.value)})]}),x("div",{className:"relative",children:[r(Ve,{className:"absolute left-3.5 top-3 text-slate-400",size:16}),r("input",{type:"text",placeholder:"\u0110\u1ECBa ch\u1EC9",className:y,value:t.address,onChange:n=>L("address",n.target.value)})]}),x("div",{className:"relative",children:[r(Be,{className:"absolute left-3.5 top-3.5 text-slate-400",size:16}),r("textarea",{placeholder:"Y\xEAu c\u1EA7u d\u1ECBch v\u1EE5...",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-100 rounded-xl min-h-[80px] focus:bg-white focus:border-blue-400 outline-none",value:t.content,onChange:n=>L("content",n.target.value)})]}),x("div",{className:"grid grid-cols-2 gap-3",children:[r("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-100 rounded-xl font-bold appearance-none text-slate-700 outline-none",value:t.status,onChange:n=>L("status",n.target.value),children:ae.map(n=>r("option",{value:n,children:n},n))}),x("select",{className:"w-full p-2.5 bg-slate-50 border border-slate-100 rounded-xl font-bold appearance-none text-slate-700 outline-none",value:t.technician,onChange:n=>L("technician",n.target.value),disabled:!S,children:[r("option",{value:"",children:"K\u1EF9 thu\u1EADt vi\xEAn"}),i.map(n=>r("option",{value:n,children:n},n))]})]}),x("div",{className:"pt-2",children:[x("div",{className:"flex justify-between items-center mb-2 px-1",children:[r("span",{className:"font-black text-slate-400 text-[10px] uppercase tracking-widest",children:"D\u1ECBch v\u1EE5 & Linh ki\u1EC7n"}),r("button",{onClick:()=>o(n=>({...n,workItems:[...n.workItems,{desc:"",qty:1,price:"",total:0}]})),className:"text-blue-500 p-1 hover:bg-blue-50 rounded-lg",children:r(je,{size:18})})]}),r("div",{className:"space-y-2",children:t.workItems.map((n,l)=>x("div",{className:"p-3 bg-slate-50/50 border border-slate-100 rounded-2xl space-y-2 relative group hover:border-blue-100 transition-all",children:[r("input",{type:"text",placeholder:"T\xEAn d\u1ECBch v\u1EE5...",className:"w-full bg-transparent font-bold text-slate-800 outline-none border-b border-transparent focus:border-blue-200",value:n.desc,onFocus:()=>H(l),onChange:d=>M(l,"desc",d.target.value),onBlur:()=>setTimeout(()=>H(null),200)}),K===l&&r("div",{className:"absolute top-full left-0 right-0 bg-white border border-slate-100 shadow-2xl z-50 max-h-40 overflow-auto rounded-xl mt-1",children:X.filter(d=>d.name.toLowerCase().includes(n.desc.toLowerCase())).map((d,e)=>x("div",{onMouseDown:()=>{M(l,"desc",d.name),M(l,"price",d.price)},className:"p-2.5 hover:bg-slate-50 text-xs flex justify-between border-b last:border-0 font-medium cursor-pointer",children:[r("span",{children:d.name}),r("span",{className:"font-bold text-blue-500",children:P(d.price)})]},e))}),x("div",{className:"flex gap-2 text-[11px] font-bold",children:[x("div",{className:"flex-1 bg-white border border-slate-100 p-1.5 rounded-lg px-2 flex items-center gap-1",children:["SL: ",r("input",{type:"number",className:"w-full outline-none font-black text-center bg-transparent",value:n.qty,onChange:d=>M(l,"qty",d.target.value)})]}),r("div",{className:"flex-[2] bg-white border border-slate-100 p-1.5 rounded-lg px-2 text-right",children:r("input",{type:"text",className:"w-full outline-none font-black text-right text-blue-600 bg-transparent",value:P(n.price),onChange:d=>M(l,"price",d.target.value)})}),r("button",{onClick:()=>o(d=>({...d,workItems:d.workItems.filter((e,s)=>s!==l)})),className:"text-slate-300 hover:text-red-400 transition-colors p-1",children:r(ve,{size:16})})]})]},l))})]}),x("div",{className:"pt-4 space-y-2 bg-slate-100/40 p-3 rounded-[24px] border border-slate-100",children:[r("div",{className:"flex items-center gap-2 px-1 mb-1",children:r("span",{className:"font-black text-slate-400 text-[9px] uppercase tracking-[0.2em]",children:"Th\xF4ng tin t\xE0i ch\xEDnh"})}),x("div",{className:"grid grid-cols-3 gap-2",children:[x("div",{className:"flex flex-col gap-1 text-center",children:[r("span",{className:"text-[8px] font-black text-blue-500 uppercase tracking-tighter",children:"T\u1ED5ng thu"}),r("input",{type:"text",className:`${_} text-blue-600`,value:P(t.revenue),onChange:n=>L("revenue",te(n.target.value))})]}),x("div",{className:"flex flex-col gap-1 text-center",children:[r("span",{className:"text-[8px] font-black text-orange-500 uppercase tracking-tighter",children:"V\u1ED1n"}),r("input",{type:"text",placeholder:"0",className:`${_} text-orange-600`,value:P(t.cost),onChange:n=>L("cost",te(n.target.value))})]}),x("div",{className:"flex flex-col gap-1 text-center",children:[r("span",{className:"text-[8px] font-black text-red-500 uppercase tracking-tighter",children:"C\xF4ng n\u1EE3"}),r("input",{type:"text",className:`${_} text-red-600`,value:P(t.debt),onChange:n=>L("debt",te(n.target.value))})]})]})]})]}),r("div",{className:"grid grid-cols-2 gap-3 pt-2",children:p?x(Ye,{children:[r("button",{disabled:m,onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl uppercase text-[12px] active:scale-95 transition-all",children:m?"\u0110ANG L\u01AFU...":"C\u1EACP NH\u1EACT"}),r("button",{onClick:j,className:"bg-slate-100 text-slate-600 font-bold py-4 rounded-xl uppercase text-[12px] active:scale-95 transition-all",children:"TI\u1EBEP M\u1EDAI"})]}):r("button",{disabled:m,onClick:k,className:"col-span-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl shadow-lg uppercase tracking-wider text-[12px] active:scale-95 transition-all",children:m?r(le,{className:"animate-spin mx-auto",size:18}):"L\u01AFU PHI\u1EBEU M\u1EDAI"})}),p&&x("button",{onClick:()=>B(!0),className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3.5 rounded-xl uppercase shadow-md flex items-center justify-center gap-2 text-[12px] transition-all",children:[r(qe,{size:18})," XEM H\xD3A \u0110\u01A0N"]}),G&&r("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl z-[999999] flex items-center justify-center p-4",children:x("div",{className:"bg-white rounded-[40px] p-2 max-w-[360px] w-full max-h-[95vh] flex flex-col shadow-2xl relative animate-in fade-in zoom-in duration-300",children:[r("button",{onClick:()=>B(!1),className:"absolute top-4 right-4 p-2.5 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-600 z-[1000001] transition-colors shadow-sm",children:r(Ge,{size:20})}),r("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-slate-100/30 flex justify-center rounded-t-[38px]",children:r("div",{ref:I,"data-bill-container":!0,className:"bg-white shadow-xl ring-1 ring-slate-100 h-fit",children:r(xe,{formData:t,bankInfo:F})})}),x("div",{className:"p-4 bg-white grid grid-cols-2 gap-3 rounded-b-[40px] border-t border-slate-50",children:[x("button",{onClick:a,disabled:z,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl uppercase text-[11px] flex items-center justify-center gap-2 active:scale-95 transition-all shadow-lg shadow-green-100",children:[z?r(le,{size:18,className:"animate-spin"}):r(Je,{size:18})," L\u01AFU / CHIA S\u1EBA"]}),r("button",{onClick:()=>window.print(),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl uppercase text-[11px] active:scale-95 transition-all shadow-lg shadow-blue-100",children:"IN H\xD3A \u0110\u01A0N"}),r("button",{onClick:()=>B(!1),className:"col-span-2 bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3.5 rounded-2xl uppercase text-[11px] transition-all",children:"\u0110\xD3NG"})]})]})})]})};import{useState as Qe}from"react";import{X as Ze,Save as et,CreditCard as tt,RefreshCw as at,Loader2 as st}from"lucide-react";import{jsx as U,jsxs as q}from"react/jsx-runtime";var we=({config:t,onSave:o,onClose:i,isAdmin:N,onCheckUpdate:p,isCheckingUpdate:m})=>{let[b,k]=Qe({...t});return U("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:q("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl space-y-6",children:[q("div",{className:"flex justify-between items-center",children:[U("h3",{className:"font-black text-slate-900 uppercase tracking-tight",children:"C\u1EA5u h\xECnh h\u1EC7 th\u1ED1ng"}),U("button",{onClick:i,className:"p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",children:U(Ze,{size:20})})]}),q("div",{className:"space-y-4",children:[q("div",{className:"space-y-3",children:[q("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1 flex items-center gap-2",children:[U(tt,{size:12})," Th\xF4ng tin ng\xE2n h\xE0ng"]}),q("div",{className:"grid grid-cols-2 gap-3",children:[U("input",{placeholder:"ID Ng\xE2n h\xE0ng",className:"p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:b.bankInfo?.bankId,onChange:h=>k(v=>({...v,bankInfo:{...v.bankInfo,bankId:h.target.value}}))}),U("input",{placeholder:"S\u1ED1 t\xE0i kho\u1EA3n",className:"p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:b.bankInfo?.accountNo,onChange:h=>k(v=>({...v,bankInfo:{...v.bankInfo,accountNo:h.target.value}}))}),U("input",{placeholder:"Ch\u1EE7 t\xE0i kho\u1EA3n",className:"col-span-2 p-3 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:border-blue-500 text-xs",value:b.bankInfo?.accountName,onChange:h=>k(v=>({...v,bankInfo:{...v.bankInfo,accountName:h.target.value.toUpperCase()}}))})]})]}),p&&U("div",{className:"pt-2",children:q("button",{onClick:p,disabled:m,className:"w-full flex items-center justify-center gap-2 py-2.5 px-4 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-2xl text-[10px] font-bold uppercase transition-colors",children:[m?U(st,{size:14,className:"animate-spin"}):U(at,{size:14}),"Ki\u1EC3m tra c\u1EADp nh\u1EADt t\u1EEB GitHub"]})})]}),q("div",{className:"flex gap-3",children:[q("button",{onClick:()=>o(b),className:"flex-1 bg-blue-600 text-white font-bold py-3 rounded-2xl flex items-center justify-center gap-2 shadow-lg shadow-blue-100",children:[U(et,{size:18})," L\u01AFU C\u1EA4U H\xCCNH"]}),U("button",{onClick:i,className:"px-6 bg-slate-100 text-slate-600 font-bold rounded-2xl",children:"H\u1EE6Y"})]})]})})};import{useState as ie}from"react";import{X as nt,Plus as rt,Trash2 as ot,Save as lt,Users as it,Loader2 as ct}from"lucide-react";async function O(t,o,i={},N=0){if(!t||!t.startsWith("http"))throw new Error("C\u1EA5u h\xECnh URL Server kh\xF4ng h\u1EE3p l\u1EC7.");try{let b=new AbortController,k=setTimeout(()=>b.abort(),25e3),h=await fetch(t,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({...i,action:o}),signal:b.signal});if(clearTimeout(k),!h.ok)throw new Error(`HTTP ${h.status}`);let v=await h.text();if(!v)throw new Error("Server ph\u1EA3n h\u1ED3i r\u1ED7ng.");try{return JSON.parse(v)}catch{let w=v.match(/(\{[\s\S]*\}|\[[\s\S]*\])/);if(w)try{return JSON.parse(w[0])}catch{throw console.error("[API JSON Parse Error Raw]:",v),new Error("D\u1EEF li\u1EC7u t\u1EEB Server b\u1ECB l\u1ED7i c\u1EA5u tr\xFAc JSON.")}throw new Error("Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u JSON h\u1EE3p l\u1EC7 trong ph\u1EA3n h\u1ED3i.")}}catch(b){if(console.error(`[API Error] ${o}:`,b),N<1&&b.name==="AbortError")return await new Promise(k=>setTimeout(k,1e3)),O(t,o,i,N+1);throw b}}import{jsx as R,jsxs as Q}from"react/jsx-runtime";var ye=({technicians:t,setTechnicians:o,onClose:i,sheetUrl:N})=>{let[p,m]=ie(""),[b,k]=ie(!1),[h,v]=ie([...t]),j=async()=>{k(!0);try{(await O(N,"save_settings",{technicians:h})).status==="success"&&(o(h),localStorage.setItem("diti_techs",JSON.stringify(h)),alert("\u0110\xE3 l\u01B0u danh s\xE1ch KTV!"),i())}catch{alert("L\u1ED7i khi l\u01B0u!")}finally{k(!1)}};return R("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:Q("div",{className:"bg-white rounded-3xl p-6 max-w-sm w-full shadow-2xl space-y-6",children:[Q("div",{className:"flex justify-between items-center",children:[Q("h3",{className:"font-black text-slate-900 uppercase tracking-tight flex items-center gap-2",children:[R(it,{size:18})," Qu\u1EA3n l\xFD KTV"]}),R("button",{onClick:i,className:"p-2 bg-slate-100 rounded-full text-slate-400 hover:text-slate-600",children:R(nt,{size:20})})]}),Q("div",{className:"flex gap-2",children:[R("input",{type:"text",placeholder:"T\xEAn KTV m\u1EDBi",className:"flex-1 p-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none text-sm",value:p,onChange:w=>m(w.target.value),onKeyDown:w=>{w.key==="Enter"&&p&&(v([...h,p.trim()]),m(""))}}),R("button",{onClick:()=>{p&&(v([...h,p.trim()]),m(""))},className:"p-2.5 bg-blue-600 text-white rounded-xl",children:R(rt,{size:20})})]}),R("div",{className:"max-h-60 overflow-auto space-y-2 custom-scrollbar pr-1",children:h.map((w,F)=>Q("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-100 rounded-xl",children:[R("span",{className:"font-bold text-sm text-slate-700",children:w}),R("button",{onClick:()=>v(h.filter((S,K)=>K!==F)),className:"text-red-400 hover:text-red-600",children:R(ot,{size:16})})]},F))}),Q("div",{className:"flex gap-3",children:[Q("button",{disabled:b,onClick:j,className:"flex-1 bg-blue-600 text-white font-bold py-3 rounded-2xl flex items-center justify-center gap-2 shadow-lg shadow-blue-100",children:[b?R(ct,{className:"animate-spin"}):R(lt,{size:18})," L\u01AFU L\u1EA0I"]}),R("button",{onClick:i,className:"px-6 bg-slate-100 text-slate-600 font-bold rounded-2xl",children:"H\u1EE6Y"})]})]})})};import{jsx as C,jsxs as ee}from"react/jsx-runtime";var bt=()=>{let[t,o]=D(()=>{let e=localStorage.getItem("diti_user");return e?JSON.parse(e):null}),[i,N]=D(()=>{let e=localStorage.getItem("diti_config");return{...e?JSON.parse(e):fe,sheetUrl:re}}),[p,m]=D([]),[b,k]=D([]),[h,v]=D([]),[j,w]=D(!1),[F,S]=D(!1),[K,H]=D(!1),[G,B]=D(!1),[z,$]=D(null),[I,X]=D({dateFrom:ne(),dateTo:ne(),searchTerm:"",searchTech:"",viewAll:!1}),[L,M]=D({customerName:"",phone:"",address:"",status:ae[0],technician:"",content:"",workItems:[{desc:"",qty:1,price:"",total:0}],revenue:0,cost:0,debt:0});ke(()=>{let s=setTimeout(()=>{let c=document.getElementById("splash");c&&(c.style.opacity="0",setTimeout(()=>{c&&c.parentNode&&c.remove()},600))},800);return()=>clearTimeout(s)},[]);let a=dt(async()=>{if(t){w(!0);try{let e=await O(i.sheetUrl,"read");if(Array.isArray(e)){let J=e.map(E=>{let W=[];try{W=typeof E.work_items=="string"?JSON.parse(E.work_items):E.work_items||[]}catch{W=[]}return{...E,customerName:E.customer_name||E.customerName||"",workItems:Array.isArray(W)?W:[],revenue:Number(E.revenue||0),cost:Number(E.cost||0),debt:Number(E.debt||0),created_at:E.created_at||E.date||new Date().toISOString()}});m(J)}let s=await O(i.sheetUrl,"read_settings");if(s){let J=[];if(s.technicians)try{J=typeof s.technicians=="string"?JSON.parse(s.technicians):s.technicians}catch{J=["KTV M\u1EB7c \u0111\u1ECBnh"]}k(Array.isArray(J)?J:[])}let c=await O(i.sheetUrl,"read_pricelist");Array.isArray(c)&&v(c)}catch(e){console.error("Fetch Data Error:",e)}finally{w(!1)}}},[t,i.sheetUrl]);ke(()=>{t&&a()},[t,a]);let y=pt(()=>{let e=[...p];if(t?.role!=="admin"&&t?.associatedTech&&(e=e.filter(s=>s.technician===t.associatedTech)),I.viewAll||(e=e.filter(s=>{let c=(s.created_at||"").split("T")[0];return c>=I.dateFrom&&c<=I.dateTo})),I.searchTech&&(e=e.filter(s=>s.technician===I.searchTech)),I.searchTerm){let s=I.searchTerm.toLowerCase();e=e.filter(c=>(c.customerName||"").toLowerCase().includes(s)||(c.phone||"").includes(s)||(c.address||"").toLowerCase().includes(s))}return e.sort((s,c)=>new Date(c.created_at).getTime()-new Date(s.created_at).getTime())},[p,I,t]),_=async(e,s)=>{w(!0);try{let c=await O(i.sheetUrl,"login",{username:e,password:s});c&&c.status==="success"&&c.user?(o(c.user),localStorage.setItem("diti_user",JSON.stringify(c.user))):alert(c?.error||"Sai th\xF4ng tin \u0111\u0103ng nh\u1EADp")}catch{alert("Kh\xF4ng th\u1EC3 k\u1EBFt n\u1ED1i m\xE1y ch\u1EE7")}finally{w(!1)}},n=()=>{confirm("\u0110\u0103ng xu\u1EA5t kh\u1ECFi h\u1EC7 th\u1ED1ng?")&&(o(null),localStorage.removeItem("diti_user"))},l=e=>{$(e.id),M({customerName:e.customerName,phone:e.phone,address:e.address,status:e.status,technician:e.technician,content:e.content,workItems:Array.isArray(e.workItems)?e.workItems:[],revenue:e.revenue,cost:e.cost,debt:e.debt}),window.innerWidth<1024&&window.scrollTo({top:0,behavior:"smooth"})},d=e=>({...e,customer_name:e.customerName,work_items:e.workItems,search_key:`${e.customerName} ${e.phone} ${e.address}`.toLowerCase()});return t?ee("div",{className:"flex flex-col min-h-screen bg-slate-50 font-sans",children:[C("header",{className:"sticky top-0 z-40 bg-white border-b px-4 py-3 shadow-sm",children:ee("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[ee("div",{className:"flex items-center gap-3",children:[C(V,{size:32}),ee("div",{children:[C("h1",{className:"font-bold text-slate-800 text-[12px] uppercase",children:"DITICOMS SERVICE"}),C("span",{className:"text-slate-400 text-[10px] uppercase font-bold",children:t.name})]})]}),ee("div",{className:"flex gap-2",children:[C("button",{onClick:()=>H(!0),className:"p-2 text-slate-400 hover:text-blue-500 transition-colors",children:C(ut,{size:18})}),C("button",{onClick:n,className:"p-2 text-red-400 hover:bg-red-50 rounded-full transition-colors",children:C(mt,{size:18})})]})]})}),C("main",{className:"flex-1 lg:h-[calc(100vh-64px)] overflow-y-auto lg:overflow-hidden",children:ee("div",{className:"max-w-7xl mx-auto p-4 lg:p-6 h-full grid grid-cols-1 lg:grid-cols-12 gap-6",children:[C("div",{className:"lg:col-span-5 h-full bg-white rounded-2xl shadow-sm border overflow-hidden flex flex-col",children:C("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:C(Ne,{formData:L,setFormData:M,technicians:b,priceList:h,selectedId:z,isSubmitting:F,currentUser:t,services:p,bankInfo:i.bankInfo,onClear:()=>{$(null),M({customerName:"",phone:"",address:"",status:ae[0],technician:t.associatedTech||"",content:"",workItems:[{desc:"",qty:1,price:"",total:0}],revenue:0,cost:0,debt:0})},onSave:async()=>{S(!0);try{let e=d(L),s=await O(i.sheetUrl,"create",{...e,id:Date.now().toString(),created_at:new Date().toISOString()});s&&s.status==="success"&&(a(),alert("\u0110\xE3 l\u01B0u phi\u1EBFu th\xE0nh c\xF4ng"),$(null))}catch(e){alert("L\u1ED7i khi l\u01B0u: "+(e instanceof Error?e.message:"Kh\xF4ng r\xF5 l\u1ED7i"))}finally{S(!1)}},onUpdate:async()=>{if(z){S(!0);try{let e=d(L),s=await O(i.sheetUrl,"update",{...e,id:z,created_at:p.find(c=>c.id===z)?.created_at});s&&(s.status==="updated"||s.status==="success")&&(a(),alert("\u0110\xE3 c\u1EADp nh\u1EADt th\xE0nh c\xF4ng"))}catch{alert("L\u1ED7i khi c\u1EADp nh\u1EADt")}finally{S(!1)}}},onDelete:async()=>{if(!(!z||!confirm("B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a phi\u1EBFu n\xE0y?"))){S(!0);try{let e=await O(i.sheetUrl,"delete",{id:z,role:t.role});e&&(e.status==="deleted"||e.status==="success")?(a(),$(null),alert("\u0110\xE3 x\xF3a phi\u1EBFu")):alert(e?.error||"Kh\xF4ng th\u1EC3 x\xF3a")}finally{S(!1)}}}})})}),C("div",{className:"lg:col-span-7 h-full flex flex-col min-h-[500px]",children:C(ge,{data:y,loading:j,technicians:b,selectedId:z,onSelectRow:l,filters:I,setFilters:{setDateFrom:e=>X(s=>({...s,dateFrom:e,viewAll:!1})),setDateTo:e=>X(s=>({...s,dateTo:e,viewAll:!1})),setSearchTerm:e=>X(s=>({...s,searchTerm:e})),setSearchTech:e=>X(s=>({...s,searchTech:e})),setViewAll:e=>X(s=>({...s,viewAll:e}))},currentUser:t})})]})}),K&&C(we,{config:i,isAdmin:t.role==="admin",onClose:()=>H(!1),onSave:e=>{N(e),localStorage.setItem("diti_config",JSON.stringify(e)),H(!1)}}),G&&C(ye,{technicians:b,setTechnicians:k,onClose:()=>B(!1),sheetUrl:i.sheetUrl})]}):C(pe,{onLogin:_,isLoading:j})},Se=bt;import{jsx as Te}from"react/jsx-runtime";var Ce=document.getElementById("root");Ce&&gt(Ce).render(Te(ht.StrictMode,{children:Te(Se,{})}));
